---
copyright:
  years: 1994, 2017
lastupdated: "2018-11-12"
---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}

# Citrix NetScaler VPX를 통한 글로벌 로드 밸런싱
{: #global-load-balancing-with-citrix-netscaler-vpx}

글로벌 서버 로드 밸런싱(GSLB)은 일반적으로 다른 지리적 위치에 있는 여러 서버/인스턴스 간에 트래픽을 분배하기 위한 메커니즘입니다. 아이디어는 클라이언트로부터 트래픽 요청을 수신하여 특정 지역으로 경로 재지정하는 글로벌 밸런싱 엔진/서버를 보유하는 것이며, 경로 재지정할 지역은 관리자가 선택하고 구성한 기준/알고리즘을 사용하여 판별됩니다. 이를 달성하기 위해 {{site.data.keyword.BluSoftlayer_notm}} 네트워크 내부에서 두 개의 인식된 메소드를 사용할 수 있습니다.

* **CDN:** 이미지 및 동영상과 같은 컨텐츠와 리치 미디어를 제공하기 위해 생성된 CDN(Content Delivery Network)입니다. CDN은 최소 대기 시간과 최고 속도를 유지하면서 분산된 노드에 지리적으로 컨텐츠를 분배합니다. 일반적으로 CDN은 전체 웹 사이트/애플리케이션이 아니라 컨텐츠의 특정 부분을 분배해야 하는 경우에 구현됩니다. {{site.data.keyword.BluSoftlayer_notm}}에서 이 서비스를 제공합니다. [여기](/docs/infrastructure/CDN?topic=CDN-getting-started)에서 이에 대해 자세히 알아보십시오. 
* **NetScaler VPX:** 일반 로컬 로드 밸런싱과 마찬가지로 VPX는 유사한 오브젝트 계층 구조를 사용하여 여러 지역 간에 트래픽을 로드 밸런싱합니다. NetScaler는 DNS 기반 글로벌 검색을 사용하여 선택한 위치/사이트에 해당하는 각 레코드를 선택하며, 관리자가 사전에 구성한 기준에 따라 선택이 이루어집니다. 다음 섹션에서 이 옵션/오퍼링에 대해 자세히 설명합니다.

Citrix NetScaler VPX로 구현할 수도 있는 컨텐츠 배포에 다른 기술을 사용할 수 있습니다(예: HTTP 경로 재지정). 

## VPX의 GSLB 정보

CLI/GUI에서 해당 기능을 활성화하여 GSLB와 함께 NetScaler VPX를 사용하도록 할 수 있습니다. 

GSLB는 로컬 로드 밸런싱 배치에서 사용되는 것과 매우 유사한 컴포넌트/오브젝트를 사용하지만 엔티티는 계층 구조 모델을 사용하여 정의됩니다.

GSLB는 여러 가지 목적으로 구현될 수 있습니다. 이 중 일부는 다음과 같습니다.

* **로드 공유/분배:** 여러 위치 간에 효율적이고 스마트하게 리소스를 분배합니다.
* **재해 복구:** 기본 또는 1차 위치가 작동 중지되거나 서비스를 렌더링할 수 없는 경우에 사용됩니다. 이 시나리오에서는 대체/백업 위치가 인계받을 수 있습니다.
* **성능/형성:** 이를 통해 최종 시스템에 더 근접하게 컨텐츠를 배치하거나 문제가 되는 서비스를 향상시키는 방식으로 컨텐츠를 배치할 수 있습니다.

GSLB 프로세스/배치의 주요 컴포넌트 또는 엔티티는 다음과 같습니다.

* **가상 서버:** VIP는 클라이언트가 요청을 전송하는 대상 IP 주소입니다. NetScaler는 VIP에서 클라이언트 연결을 종료한 후 (로컬) 로드 밸런싱 서비스에서 구성된 서버와의 연결을 시작합니다. 
* **DNS(Domain Name System) 및 이름 서버:** GSLB의 이름 분석은 일반 DNS와 매우 유사하게 작동합니다. 차이점은 분석된 주소를 판별하는 데 사용되는 로직/기준입니다. GSLB는 사전 구성된 로드 밸런싱 메소드를 사용하여 이 분석을 처리합니다. 여러 가지 방법으로 DNS와 상호작용하도록 NetScaler를 구성할 수 있습니다.
	* 권한 있는 DNS(ADNS). ADNS 모드를 사용하는 NetScaler에는 특정 도메인과 해당 도메인에 있는 모든 레코드에 대한 권한이 있습니다.
	* DNS 하위 위임. (도메인에 대한 권한이 있는) DNS 서버가 하위 도메인의 책임을 NetScaler 시스템에 위임하는 경우 발생합니다.
	* DNS 프록시. 이 모드로 구성된 경우 NetScaler가 이름 분석을 처리하는 다른 서버(외부)로 DNS 요청을 전달합니다.
* **메소드:** 메소드는 GSLB 가상 서버가 토폴로지에서 최적의 GSLB 서비스를 선택하는 데 사용하는 알고리즘입니다. 이 알고리즘은 실제 선택 기준에 해당하는 성능 측면을 평가합니다. 다음 메소드가 사용 가능합니다.
  * 라운드 로빈: 로드에 관계없이 GSLB 사이트/서비스 간에 교대로 수신 요청을 처리합니다.
  * 라운드트립 시간(RTT): 클라이언트의 로컬 DNS 서버와 (GSLB) 사이트 간의 시간 또는 지연 측정입니다. NetScaler는 ICMP 에코 요청/응답(PING), UDP 및 TCP와 같은 다양한 메커니즘을 사용하여 RTT 메트릭을 수집합니다.
  * 정적 근접성: IP 주소 데이터베이스를 사용하여 클라이언트의 로컬 DNS 서버 및 사이트 간 근접성을 설정한 후 이를 기준으로 사용하여 선택합니다.
  * 최소 연결 수: 각 사이트/서비스의 최소 활성 연결 수를 선택 기준으로 측정합니다.
  * 최소 응답 시간: 활성 연결 수가 가장 적고 평균 응답 시간이 가장 낮은 사이트를 선택합니다.
  * 최소 대역폭: 현재 최소 양의 트래픽(Mbps)을 관리 중인 사이트를 선택합니다.
  * 최소 패킷 수: 최근 14초 동안 가장 적은 수의 패킷을 수신한 서비스를 선택합니다.
  * 소스 IP 주소 해시: 클라이언트 IPv4 또는 IPv6 주소의 해시된 값을 기반으로 서비스를 선택합니다.
  * 사용자 정의 로드: 활성 트랜잭션을 처리 중이지 않은 서비스를 선택합니다. 로드 밸런싱 설정의 모든 서비스가 활성 트랜잭션을 처리 중인 경우 어플라이언스에서 로드(CPU 사용량, 메모리 및 응답 시간)가 가장 적은 서비스를 선택합니다.

* **MEP(Metric Exchange Protocol):** 사이트 간에 메트릭(로드 및 네트워크) 및 지속성 정보를 교환하는 데 사용되는 독점 프로토콜입니다. MEP는 GSLB 메시/토폴로지의 여러 사이트/NetScaler 간의 상태 검사를 제공합니다. MEP는 관리자가 설정한 기준을 사용하여 사이트에서 이전에 구성된 선택 매개변수를 기반으로 트래픽을 전달하고 처리하는 방법을 제공합니다. MEP는 TCP 포트 3009 및 3011을 사용합니다. MEP가 사용 안함으로 설정된 경우 메소드 선택은 별표(*)로 표시된 이전에 나열된 옵션으로 제한됩니다. 선택한 모든 다른 메소드가 라운드 로빈으로 되돌아갈 수 있습니다.
* **모니터링:** NetScaler 엔진이 문제의 서비스에 바인드된 명시적 모니터 또는 MEP를 사용하여 원격 GSLB 서비스의 상태를 주기적으로 평가합니다. 모니터는 일반 로드 밸런싱 서비스에서와 마찬가지로 사용됩니다. GSLB의 경우에는 일반적으로 MEP에서 제어되므로 로컬 서비스에 모니터를 추가할 필요가 없습니다. 
* **지속성:** 특정 도메인에 대한 사이트 환경 설정을 설정하는 선택적 기능입니다. 이 특정 유스 케이스에서는 트래픽이 로드 밸런싱되지 않지만 동일한 데이터 센터에서 처리됩니다. 이는 트랜잭션 데이터가 각 사이트/서버마다 고유한 특정 애플리케이션(예: e-commerce)에서 유용할 수 있습니다.
* **GSLB 사이트:** 사이트는 NetScaler 시스템이 구성되어 존재하는 데이터 센터 또는 위치로 정의할 수 있습니다. 각 GSLB 사이트는 해당 사이트에 대해 "로컬"로 간주되는 NetScaler 시스템에서 관리되며 다른 모든 원격 시스템/사이트는 "원격" 사이트로 표시되고 처리됩니다.
* **GSLB 서비스:** (일반) 가상 서버/VIP를 나타내고 여기에 바인드된 오브젝트입니다. 로컬(동일한 사이트) 또는 원격일 수 있습니다.
* **GSLB 가상 서버:** GSLB 가상 서버는 일반적으로 여러 (GSLB) 사이트의 파트인 하나 이상의 GSLB 서비스에 지정됩니다. GSLB 가상 서버에 수신된 트래픽은 여기에 바인드된 사이트 간에 로드 밸런싱됩니다. 사이트 선택은 메소드 및 유스 케이스를 기반으로 수행됩니다.
* **GSLB 도메인:** GSLB 가상 서버가 담당하는 도메인 또는 구역을 나타냅니다. 
* **ADNS 서비스:** IP 주소와 포트의 조합으로 표시되는 서비스이며, NetScaler가 권한을 가지는 도메인에 대한 DNS 요청이 전송되는 위치입니다. NetScaler는 응답을 얻기 위해 DNS 요청을 해당 도메인에 바인드된 GSLB 가상 서버로 이동합니다.
