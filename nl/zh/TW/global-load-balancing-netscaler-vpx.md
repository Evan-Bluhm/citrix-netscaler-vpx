---
copyright:
  years: 1994, 2017
lastupdated: "2018-11-12"
---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}

# 使用 Citrix NetScaler VPX 的廣域負載平衡
{: #global-load-balancing-with-citrix-netscaler-vpx}

廣域伺服器負載平衡 (GSLB) 是一種將資料流量配送到多部伺服器/多個實例（通常位於不同的地理位置）的機制。此構想是要讓廣域平衡引擎/伺服器接收來自各用戶端的資料流量要求，並將它們重新導向至特定地理位置，後者是使用管理者所選取及配置的準則/演算法來決定。為達到此目的，可以在 {{site.data.keyword.BluSoftlayer_notm}} 網路內使用兩個已辨識的方法：

* **CDN：**發出「內容遞送網路 (CDN)」以提供內容及複合式多媒體（例如影像及視訊），CDN 會將內容配送到地理位置不同的節點，同時維持最少延遲及最高速度。相對於整個網站/應用程式而需要配送內容的特定部分時，通常會實作該方法。{{site.data.keyword.BluSoftlayer_notm}} 提供此服務，請在[這裡](/docs/infrastructure/CDN?topic=CDN-getting-started)深入閱讀。 
* **NetScaler VPX：**就像一般的本端負載平衡一樣，VPX 會使用類似的物件階層以在數個地理位置之間負載平衡資料流量。使用 DNS 型廣域查閱時，NetScaler 會選擇對應至所選取位置/網站的個別記錄，這項選擇是以管理者預先配置的準則為基礎。接下來章節將詳述此選項/供應項目。

請注意，其他技術適用於也可以使用 Citrix NetScaler VPX 來實作的內容配送（例如 HTTP 重新導向）。 

## 關於 VPX 上的 GSLB

NetScaler VPX 只能使用 GSLB 來啟用，方法是在 CLI/GUI 上啟動它的特性。 

GSLB 使用非常類似的元件/物件作為在本端負載平衡部署上使用的元件/物件，其中實體是使用階層式模型所定義。

可能會針對一些用途實作 GSLB。其中有一些可能為：

* **負載分散/配送：**有效率且聰明地在多個位置之間配送資源。
* **災難回復：**在主要位置關閉或無法呈現服務時使用。在此情境中，替代/備份位置可以進行接管。
* **效能/整理：**這容許您將內容定位至更靠近終端系統，或使用可加強有問題服務的方式。

在 GSLB 處理程序/部署中，主要元件或實體如下：

* **虛擬伺服器：**VIP 是用戶端傳送要求的目標 IP 位址、NetScaler 會終止 VIP 的用戶端連線，然後起始與（本端）負載平衡服務中已配置伺服器的連線。 
* **DNS（網域名稱系統）及名稱伺服器：**GSLB 上的名稱解析運作與一般 DNS 非常類似。差異在於用來判定已解析位址的邏輯/準則，GSLB 使用預先配置的負載平衡方法來處理這項解析。NetScaler 可以配置成以不同的方式與 DNS 互動：
	* 授權性 DNS (ADNS)。使用 ADNS 模式的 NetScaler 具有特定網域及其所有記錄的授權。
	* DNS 子委派。發生在 DNS 伺服器（網域的授權性）將子網域的責任委派給 NetScaler 系統時。
	* DNS Proxy。以此模式配置時，NetScaler 會將 DNS 要求轉遞至處理名稱解析的另一部伺服器（外部）。
* **方法：**方法是一種演算法，GSLB 虛擬伺服器用來從拓蹼中選取最佳 GSLB 服務。演算法會評量對應至實際選取準則的效能層面。下列是可用的方法：
  * 循環式：替代要在 GSLB 網站/服務之間處理的送入要求，不論其負載為何。
  * 來回時間 (RTT)：測量用戶端本端 DNS 伺服器與 (GSLB) 網站之間的時間或延遲。NetScaler 會使用不同的機制（例如 ICMP 回應要求/回覆 (PING)、UDP 及 TCP）來收集 RTT 度量值。
  * 靜態近似性：使用 IP 位址資料庫來建立用戶端本端 DNS 伺服器與網站之間的近似性，然後使用此作為準則來進行選擇。
  * 最少連線：測量每一個網站/服務上的最少作用中連線數以作為選取準則。
  * 最少回應時間：選取具有最少作用中連線數及最低平均回應時間的網站。
  * 最小頻寬：選擇目前管理最小資料流量 (Mbps) 的網站。
  * 最少封包：選取在過去 14 秒內接收到最少封包數的服務。
  * 來源 IP 位址雜湊：根據用戶端 IPv4 或 IPv6 位址的雜湊值來選取服務。
  * 自訂負載：選取不處理任何作用中交易的服務。如果負載平衡設定中的所有服務都會處理作用中交易，則應用裝置會選取具有最小負載的服務（CPU 使用率、記憶體及回應時間）。

* **MEP（度量值交換通訊協定）：**用來在網站之間交換度量值（負載和網路）及持續性資訊的專有通訊協定。MEP 提供 GSLB 網/拓蹼中不同網站/NetScaler 之間的性能檢查。使用管理者所設定的準則，MEP 提供一種方法，讓網站根據先前配置的選取參數來傳達及處理資料流量。MEP 使用 TCP 埠 3009 及 3011。停用 MEP 時，方法的選取會限制為之前列出並標上星號 (*) 的選項。任何選擇的其他方法都會回復為「循環式」。
* **監視：**NetScaler 引擎會使用 MEP 或連結至有問題服務的明確監視，來定期評估遠端 GSLB 服務的狀態。監視器的使用就像一般負載平衡服務。如果是 GSLB，則不需要將監視器新增至本端服務，因為這通常是由 MEP 控制。 
* **持續性：**建立特定網域之網站喜好設定的選用特性。在此特定使用案例中，資料流量不會進行負載平衡，但由相同的資料中心進行處理。在特定應用程式（例如電子商務）中這可能很有用，其中交易式資料在每一個網站/伺服器上都是唯一的。
* **GSLB 網站：**網站可以定義為已配置/存在 NetScaler 系統的資料中心或位置。每一個 GSLB 網站都由視為該網站「本端」的 NetScaler 系統所管理，而所有其他遠端系統/網站都會顯示並視為「遠端」網站。
* **GSLB 服務：**這個物件代表（且已連結至）（一般）虛擬伺服器/VIP。它可以是本端（相同網站）或遠端。
* **GSLB 虛擬伺服器：**GSLB 虛擬伺服器會指派給一般是屬於不同 (GSLB) 網站的一個以上 GSLB 服務。在其上接收的資料流量會在與之連結的網站之間進行負載平衡。根據方法及使用案例來完成網站選取。
* **GSLB 網域：**它代表 GSLB 虛擬伺服器可回應的網域或區域。 
* **ADNS 服務：**以 IP 位址與埠的組合來表示的服務，它就是傳送 NetScaler 具有授權之網域的 DNS 要求的位置。NetScaler 會將那些項目帶到連結至該網域的 GSLB 虛擬伺服器，以取得回應。
