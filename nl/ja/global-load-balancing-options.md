---
copyright:
  years: 1994, 2017
lastupdated: "2018-11-12"

keywords: gslb, vpx, cdn, object storage

subcollection: citrix-netscaler-vpx
---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:tip: .tip}
{:note: .note}
{:important: .important}

# グローバル・ロード・バランシング
{: #global-load-balancing}

グローバル・サーバー・ロード・バランシング (GSLB) は、サーバー・トラフィックの送信先を決定する手段として DNS と地理的位置を使用して、複数のサーバー間でトラフィックを分割する方法です。 一般に、グローバル・ロード・バランサーはクライアントに近いサーバーにクライアント要求を送信することで、待ち時間を減らし、パフォーマンスを向上させます。

グローバル・ロード・バランシング・ソリューションの完全な実装が常に必要とは限りません。 GSLB にはこの機能を実行できる適切なデバイスの複数のインスタンスが必要であり、お客様のニーズによっては他のソリューションがより魅力的な場合もあります。 Web サイトおよびアプリケーション全体が必要な場合は、GSLB を選択することが推奨されます。 イメージ、ビデオ、その他の大きなファイルなど、コンテンツの一部のみが必要な場合は、[「コンテンツ配信ネットワーク」](/docs/infrastructure/CDN?topic=CDN-about-content-delivery-networks-cdn-)の方が適している可能性があります (デプロイも容易です)。

## Citrix NetScaler VPX
{: #citrix-netscaler-vpx}

Citrix NetScaler VPX は、真のグローバル・ロード・バランシングを実行し、お客様が構成できる唯一のデバイスです。 NetScaler は、DNS ベースのグローバル・ロード・バランシング・ルックアップを実行できるマルチ機能アプライアンスです。 NetScaler を DNS サーバーとして指すことが可能で、このデバイスは、ロード・バランシングを行うように構成されたサーバーを調べ、距離計算を実行し、クライアント要求に最も近いサーバーの IP を持つレコードを返します。

グローバル・ロード・バランシングでは、各データ・センターに NetScaler アプライアンスの構成が存在することになります。 各 NetScaler アプライアンスの構成は、要件に応じて 1 つの NetScaler か、HA ペアの Netscalers のペアになり、その背後にあるサーバーに対してローカル・ロード・バランシング・サービスを提供します。 デバイスは相互に通信するように構成されているため、グローバル・ロード・バランサー・ローテーションに割り当てられた各サーバーの状態情報を交換します。 これらの構成済み NetScaler に着信する DNS 要求は、オンラインで応答性の高いサーバーの適切なレコードを返すことができます。 応答しないすべてのサーバーはローテーションから削除され、別のサーバーが選択されます。

ロード・バランシングが行われるサーバーが 1 つしかない場合でも、既にロード・バランシングがセットアップされているはずです。 一部のサービスには、追加の IP アドレス、つまり GSLB サイト IP が必要になります。 この IP は、グローバル・ロード・バランシング・プロトコルで NetScaler が別の NetScaler と通信するために使用されます。

以下のグローバル・バランシングの手順では、次のものを使用します。

### VPX1
{: #vpx1}

`50.97.235.236` は `VPX1Vserver`という名前で、そのデバイスのローカル・ロード・バランシング VIP です。 `50.23.66.52` は `VPX1site` と呼ばれ、そのデバイスの GSLB のローカル IP です。

### VPX2
{: #vpx2}
`208.43.241.249` は `VPX2Vserver` に使用され、GSLB IP は `208.43.224.4` であり、`VPX2site` と呼ばれます。

1. **「トラフィック管理 (Traffic Management)」>「GSLB」** に移動し、右クリックしてフィーチャーを有効にします。 次に、**「サイト (Sites)」**、**「追加 (Add)」**と選択します。

2. 最初のデバイスで、名前を VPX1、タイプをローカル、IP を `50.23.66.52` と入力し、**「閉じる (Close)」**を選択します。

	状況が緑色で示されたサイトが表示されます。 まだリモート・サイトを追加しないでください。

3. **「トラフィック管理 (Traffic Management)」>「GSLB」** に移動し、**「GSLB ウィザード (GSLB Wizard)」**を選択します。 **「次へ」**をクリックします。 ロード・バランシングを行うホスト名 (この例では `gslb.tsstesting.com`) を入力します。レコード・タイプは A、サービス・タイプは ANY のままにしておきます。 仮想サーバー名は自動的に生成されます。 **「次へ」**をクリックします。

4. 通常のロード・バランシングと同様に、バランスの形式とパーシスタンス方式を選択します。 **「次へ」**をクリックします。

5. サイトのデータは既に取り込まれているため、何も追加する必要はありません。 代わりに、最初のサイトの名前の横にある緑色の「+」をクリックします。 リストからそのデバイス上の Vserver を選択し、**「作成 (Create)」**をクリックします。サイト IP とロード・バランシング・セットアップの Vserver IP が構成されたサイトが緑色で表示されるはずです。**「次へ (Next)」**、**「完了 (Finish)」**、**「終了 (Exit)」**の順にクリックします。

6. 次の NetScaler にも、そのサーバーの値を使用して同じアクションを実行します。

7. 両方のサーバーで、**「トラフィック管理 (Traffic Management)」>「DNS」>「レコード (Records)」>「A レコード (A records)」**と移動し、リストを調べます。 `root.servers.net` エントリーに加えて、`GSLB DOMAIN` タイプのホスト名が表示されているはずです。

8. **「トラフィック管理 (Traffic Management)」>「DNS」>「ネーム・サーバー (Name Servers)」**と移動し、**「追加 (Add)」**をクリックします。 NetScaler 上の IP アドレス (デバイスのパブリック IP など) を入力します。 **「ローカル (Local)」** をクリックし、プロトコルを UDP のままにします。 **「作成 (Create)」**、**「閉じる (Close)」**の順にクリックします。 有効な状態が使用可能で稼働中であることがわかります。

9. **「システム (System)」>「ネットワーク (Network)」>「IP」** と移動し、GSLB IP アドレスを開きます。 両方のマシンで**「管理 (Management)」** が選択されていることを確認します。

10. 次に、両方のサーバーで**「トラフィック管理 (Traffic Management)」>「GSLB」** に戻り、ウィザードを再度実行します。 今回は**「次へ (Next)」**をクリックし、**「既存ドメインの構成を変更 (Modify Configuration for Existing Domains)」**を選択します。 リストからホスト名を選択し、**「次へ (Next)」** を 2 回クリックします。

11. サイト・アドレス・フィールドに、もう一方の NetScaler のサイト IP アドレスを入力し、もう一方の NetScaler のサイト名を付けて、**「追加 (Add)」**をクリックします。 サイトのデータが、緑色の「+」をクリックするためのオプションとともに再び追加されます。 別のサイトを追加するには、リモート・サイトの正符号をクリックします。 Vserver サービス IP (GSLB サイト IP ではなく、ロード・バランシングされるサーバーの IP) とポートを入力し、**「作成 (Create)」**、**「閉じる (Close)」**、**「次へ (Next)」**、**「完了 (Finish)」**、**「終了 (Exit)」**の順にクリックします。

この時点まで、すべての作業が順調に進み、両方のサーバーが構成されている場合、GSLB 仮想サーバー、サービス、サイトはすべて緑色の状況になります。 2 つのマシンが適切に同期されると、両方のマシンの GSLB サービスに 2 つのエントリーが生成されていることがわかります。 この時点で、サーバーは相互に通信しています。

次に、DNS を構成する必要があります。

この例の `gslb.tsstesting.com` で、NS を作成し、tsstesting.com ゾーンにレコードを貼り付けます。

    gslb.tsstesting.com. IN NS NS1.gslb.tsstesting.com
    gslb.tsstesting.com. IN NS NS2.gslb.tsstesting.com
    NS1.gslb.tsstesting.com. IN A 10.54.0.141 ; nameserver IP of first NetScaler
    NS2.gslb.tsstesting.com. IN A 172.16.1.101 ; nameserver IP of second NetScaler
    www.tsstesting.com. IN CNAME gslb.tsstesting.com ; alias to the GSLB object on the NetScaler appliance

CNAME はホスト名とのみ使用でき、ドメインのルートでは使用できないことに留意してください。

この構成により、`gslb.tsstesting.com` への要求を処理するネーム・サーバーが、DNS を構成した NetScaler IP に設定されます。 CNAME レコードにより、`tsstesting.com` が `gslb.tsstesting.com` への要求に変換されます。 `www.tsstesting.com` に対する要求はすべて NetScaler に送られて解決され、構成したロード・バランシング方式に基づいてレコードが返されます。

NetScaler グローバル・ロード・バランシングについて詳しくは、以下を参照してください。
* [「グローバル・ロード・バランシングに向けた Netscaler の構成」![外部リンク・アイコン](../../icons/launch-glyph.svg "外部リンク・アイコン")](http://support.citrix.com/article/CTX110348){: new_window}
* [「NetScaler における DNS (ドメイン・ネーム・システム) と GSLB フィーチャーの連携の仕組み」![外部リンク・アイコン](../../icons/launch-glyph.svg "外部リンク・アイコン")](https://support.citrix.com/article/CTX122619){: new_window}
* [「MEP プロトコルとサイト・モニタリングに関する情報」![外部リンク・アイコン](../../icons/launch-glyph.svg "外部リンク・アイコン")](http://support.citrix.com/article/CTX111081){: new_window}

地理的な条件に基づいてトラフィックを分散するための類似機能を提供できる他の製品もあります。

### CDN
{: #cdn}

コンテンツ配信ネットワーク (CDN) を使用すると、地理的に分散したキャッシュ・サーバーに発信元サーバーをアップロードしたり、提供したりすることができます。これにより、要求元のクライアントにコンテンツが提供されます。 CDN は、時間の経過とともに変化しない静的なバルク・コンテンツ (イメージやビデオなどの) で最適に機能します。

CDN について詳しくは、[この資料](/docs/infrastructure/CDN?topic=CDN-getting-started)を参照してください。

### オブジェクト・ストレージ
{: #object-storage}

{{site.data.keyword.BluSoftlayer_notm}} のオブジェクト・ストレージは、さまざまなデータ・センターにおける複数の地理的位置を使用してコンテンツを提供するように構成できます。 地理を認識するアプリケーションは、クライアント要求でロケーション検索を実行し、クライアントに近いオブジェクト・ストレージへの URL を返すことができます。 オブジェクト・ストレージには CDN フロントエンドも装備されていて、必要であれば、上記のような追加のキャッシング・サービスも提供します。

オブジェクト・ストレージの詳細と概要については、[この資料](/docs/services/cloud-object-storage?topic=cloud-object-storage-about)を参照してください。
