---
copyright:
  years: 1994, 2017
lastupdated: "2018-11-12"

keywords: basics, configure, configuration, gui, pool

subcollection: citrix-netscaler-vpx
---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:tip: .tip}
{:note: .note}
{:important: .important}

# ロード・バランシングの基本構成
{: #basic-load-balancing-configuration}

基本的なソーシャル・コミュニティー Web サイトを持つ会社について考えてみます。この Web サイトでは、エンド・ユーザーは機密情報が不要なアカウントに登録することができ、その後ログインしてペットの写真を投稿できます。 3 つの Web/アプリケーション・サーバーと、それらをバックアップする 1 つのデータベース・サーバーがあります。 ドメインと DNS は {{site.data.keyword.BluSoftlayer_notm}} でホストされています。小規模な環境であるため、NetScaler サーバーと Web/アプリケーション・サーバーはすべて同じ VLAN 内にあります。 基本的なロード・バランシング・ポリシーをセットアップするために NetScaler で必要な構成はこれ以上ないので、作業はシンプルになります。 以下の手順は、この例でのトラフィック・フローをかなり簡略化して説明したものです。

1. ユーザーがブラウザーに URL を入力します。
2. URL の DNS レコードは、NetScaler 上のパブリック VIP の 1 つを指しています。
3. NetScaler はその VIP 上のトラフィックを受信し、使用されているトラフィックのプロトコル (HTTP ポート80 トラフィック) を記録します。
4. 次に、NetScaler は、定義済みのバランシング方式 (ラウンドロビン、パーシスタンス IP など) に基づいて、そのトラフィックをサーバー・プール内のサーバーの 1 つに渡します。
5. そして、サーバーがトラフィックを受け取り、ユーザーが接続してログインします。

これを実現するには、このトラフィックを処理するように NetScaler を構成する必要があります。 VIP、DNS サーバーの IP、および SNIP は既に構成されているため、構成が簡単になります。

NetScaler GUI の「構成 (Configuration)」画面で、左側の**「トラフィック管理 (Traffic Management)」** を展開します。 **「ロード・バランシング (Load Balancing)」**というタイトルのサブセクションを展開します。 次に、以下の手順に従って、ロード・バランシング・ポリシーに含めるターゲット・サーバーを NetScaler に指示します。

1. 「Load Balancing (ロード・バランシング)」で**「サーバー (Servers)」**をクリックします。
2. **「追加 (Add)」**をクリックします。
3. サーバーの名前 (例: Web1) を入力します。
4. サーバーの IP アドレスを入力します。
5. このシナリオではデフォルトのトラフィック・ドメインの使用のみに関心があるため、**「トラフィック・ドメイン (Traffic Domain)」** フィールドはブランクのままにします。
6. このサーバーに関する任意のコメントを入力します。
7. **「作成 (Create)」**をクリックします。

プール内のすべてのサーバーについて、この手順を繰り返します。  

簡単にサーバーを識別できるように、同じプールのサーバーには類似した命名規則を使用してください (例: Web1、Web2、Web3 など)。
{: tip}

次に、サービスを作成します。 先ほど入力したサーバーごとにサービスを作成します。 サービスとは、NetScaler とプール内のサーバーとの間の接続を構成するものです。 各サービスには名前があり、IP アドレス、ポート、および提供されるデータのタイプを指定します。

1. **「トラフィック管理 (Traffic Management)」>「ロード・バランシング (Load Balancing)」>「サービス (Services)」**の順にクリックします。
2. **「追加 (Add)」**をクリックします。
3. 先ほど作成したサーバーごとに、同じ情報を使用してサービスを作成します。

次に、仮想サーバーを作成します。 仮想サーバーとは、ロード・バランシングを設定したサーバーに使用される VIP と、先ほど作成したサービスとの間の仮想接続の一種です。

1. **「トラフィック管理 (Traffic Management)」>「ロード・バランシング (Load Balancing)」>「仮想サーバー (Virtual Servers)」**の順にクリックします。
2. **「追加 (Add)」**をクリックします。
3. 仮想サーバーに名前を付けます。
4. バランシング対象のプロトコル (HTTP) を指定します。
5. IP アドレス・タイプはデフォルト (IP アドレス) のままにします。 「IP アドレス (IP address)」フィールドには、すべてのユーザーのエントリー・ポイントとして使用する VIP を入力します。
6. ポートを指定します。 デフォルトはポート 80 です。
7. **「OK」**をクリックします。

次に、作成したサービスを仮想サーバーにバインドします。

1. 「仮想サーバー (Virtual Servers)」画面で、**「ロード・バランシング仮想サーバーのサービス・バインディングなし (No Load Balancing Virtual Server Service Binding)」** リンクをクリックします。
2. 先ほど作成した各サービスを仮想サーバーにバインドします。
3. **「完了 (Done)」**をクリックします。
4. **「最新表示 (Refresh)」**ボタンをクリックします。 「状態と有効な状態 (State and Effective State)」は緑色で表示されます。

これで、Web サイトのロード・バランシング・プールとポリシーを作成しました。

Citrix NetScaler VPX デバイスの構成について詳しくは、[Citrix 資料ページ ![外部リンク・アイコン](../../icons/launch-glyph.svg "外部リンク・アイコン")](https://docs.citrix.com/en-us/netscaler.html) を参照してください。さらに支援が必要な場合は、{{site.data.keyword.BluSoftlayer_notm}} のサポートおよび営業担当員にお問い合わせください。
{: note}
